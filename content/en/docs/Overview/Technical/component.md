---
title: "Component View"
linkTitle: "Component View"
weight: 1
date: 2021-06-30
---

The diagram below shows a component view of the Amplify Open Banking solution.

![Component View](/Images/Component_View_v320.svg)

The table below provides details of each of the components listed above. The list includes the name of the solution building block to which the component relates.

| Name | Solution Building Block | Purpose | Production Requirement | Notes |
| ---- | ----------------------- | ------- | ---------------------- | ----- |
| Ingress Controller | Utilities   | Provides the [means for an Ingress resource](https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/) to operate in the Kubernetes environment.<br><br>Responsible for terminating a mutually-authenticated TLS connection from a client application. This is implemented only on a specific ingress (identity and one API traffic listener m-api.domain-name). | Conditional | Customers can make a choice of Ingress Controller but it must be capable of terminating a mutually-authenticated TLS connection. The Ingress Controller must also be capable of forwarding the certificate fingerprint as an HTTP header to the API Management or Cloudentity.<br><br>The NGINX Ingress Controller used in the standard deployment is not included in our deployment package. |
| descheduler | Utilities | The descheduler pod is required to force Kubernetes to allocate pods between different pods after downscaling as Kubernetes does not respect the anti-affinity pod when it downscales the number of replicas.<br><br>If a descheduler is not used multiple api-traffic pods can be allocated on the same node and result in degraded performance. | Mandatory | This component is not included in our deployment package. |
| cert-manager | Utilities | Used to generate and renew certificates from a CA and create DNZ zone records.<br><br>Certificates are created for both ingress and TBC. | Conditional | This component cannot be used as intended for DNS record creation when the Kubernetes cluster is deployed behind other components.<br><br>This component is not included in our deployment package.|
| external-dns | Utilities   | Used to configure external DNS records for ingress. | Conditional | This component is not required if DNS configuration through cert-manager is not enabled.<br><br>Customers must use one of the supported providers listed in the [ExternalDNS project](https://github.com/kubernetes-sigs/external-dns).<br><br>This component is not included in our deployment package.|
| fluentd | Utilities | Streams all standard output from containers to log store. | Conditional | This component can be replaced by any tool with equivalent capabilities. It is not included in our deployment package. |
| Grafana | Utilities | Grafana is a tool that displays dashboard information from data sources in the Kubernetes stack. The information includes resources consumption, pod health checks, and so on. | Conditional | This component can be replaced by any tool with equivalent capabilities. It is not included in our deployment package. |
| Prometheus  | Utilities   | Monitoring tool for Kubernetes.  | Conditional | This component can be replaced by any tool with equivalent capabilities. It is not included in our deployment package. |
| Admin Node Manager | API Management | | Mandatory | |
| API Manager | API Management | Management tool for API Management infrastructure. | Mandatory | |
| API Traffic | API Management | Responsible for receiving and executing all requests from API consumers. | Mandatory | We recommend adapting the minimum sizing according to the estimated volumes per month. This will allow the pod autoscaler to adapt the number of pods during the peak load.<br><br>To support peak load and SLAs multiple replicas must be used. In addition, the Horizontal Pod Autoscaler (HPA) must be activated (by default this is disabled).<br><br>The configuration of this component ensures each replica is spread across different nodes (anti-affinity node), which reduces IOPS.<br><br>These pods require multiple services and ingress as they have multiple listeners.
| APIMCLI | API Management | Job that configures all API objects in the API Manager including users, settings, APIs, organizations, applications and so on. | Mandatory | This job is executed after each upgrade to ensure the API Manager is up-to-date.<br><br>All configurations are externalized in a Kubernetes config map to allow the API configuration to be updated by the installer as required.<br><br>API descriptions in both US English and Portuguese (for Brazil deployments) are available by default. |
| Cassandra | API Management | Data store for API Manager configuration, throttling, and additional data. | Mandatory | 3 nodes are required in production that must be spread on different availability zones.<br><br>Supports Cassandra 3.11.11 only and blocks usage of managed databases in all cloud providers |
| Discovery Agent | Amplify Agents | Discovery Agent discovers the API from API Manager and makes it available in Amplify | Mandatory |  |
| Traceability Agent | Amplify Agents | Traceability Agent uses the API Gateway events to extract the transaction information and send it to the Amplify platform Observability module | Mandatory | |
| open-banking-backend (multiple applications) | API Builder | The purpose of these applications is:<br><ul><li>Provide a mock backend for use in your developer experience if you want.| Conditional | The backend services provided by the open-banking-backend component are created using API Builder and are designed to be reconfigured for use with  your backend services to provide the data required for Open Banking.<br><br>You can swap these out for an application with equivalent functionality if you want. However, if this course of action is taken then the benefit of providing an application that is designed to be compliant with the relevant standards/OpenAPI specification is lost. |
| MySQL Backend Services | Utilities | Provides storage for mock backend services. | Conditional | Provides storage for backend services where the API Builder applications are using the default configuration. This does not need to be deployed if the backend services APIs are integrated with the Core Banking Applications. |
| Cloudentity | Identity Management<br><br>Consent Management | Cloudentity that provides:<br><ul><li>Authorization Server</li><li>Token endpoint</li><li>Management and configuration UI</li></ul> | Mandatory | Cloudentity is required to provide:<br><ul><li>Compliance with the Brazil FAPI Security Profile.</li><li>Integration with Consent Management to support Open Banking Brazil standards.</li><li>Integration with external IDPs already implemented by customers.</li></ul> |
| acp-cockroachdb-init | Identity Management <br></br> Consent Management | Job to initialize the default configuration for Cloudentity. | Mandatory |  |
| CockroachDB | Identity Management<br><br>Consent Management | Cloudentity uses CockroachDB to store various types of data, such as users added to Cloudentity Identity Pools, configuration of client applications connected to a workspace, information about consent grants, and many more | Mandatory |  |
| Redis | Identity Management | The Cloudentity platform uses Redis to store a variety of data types that are well-suited for key-value storage. This includes security tokens such as access tokens, which grant users access to protected resources, and identity tokens, which provide information about the userâ€™s identity. | Mandatory |  |
| TimescaleDB | Identity Management | Cloudentity uses TimescaleDB to store audit and analytics/metrics data because it is a powerful and efficient tool for handling large amounts of time-series data.  | Optional |  |
| consent admin | Consent Management | Consent administration demo application | Optional | This only provides demo capabilities, therefore it is not recommended to use this component in production. For Production you can take one of two courses of action:<br><ul><li>Use the provided template and enhance it for production usage</li><li>Develop your own web component and call Cloudentity APIs to perform consent operations.</li></ul> |
| consent self-service | Consent Management | Consent self-service demo application | Optional | This only provides demo capabilities, therefore it is not recommended to use this component in production. For Production you can take one of two courses of action:<br><ul><li>Use the provided template and enhance it for production usage</li><li>Develop your own web component and call Cloudentity APIs to perform consent operations.</li></ul> |
| consent page | Consent Management | Consent confirmation demo page | Optional | This only provides demo capabilities, therefore it is not recommended to use this component in production. For Production you can take one of two courses of action:<br><ul><li>Use the provided template and enhance it for production usage</li><li>Develop your own web component and call Cloudentity APIs to perform consent operations.</li></ul> |
| acp-import | Identity Management <br></br> Consent Management | Job to implement the default configuration for Cloudentity. | Optional | It creates the configuration for the target specification. If not used, then Cloudentoty needs to be configured manually |