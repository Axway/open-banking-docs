---
title: "API Gateway configuration"
linkTitle: "API Gateway"
description: Configure the Open Banking homepage content, KPS, the policies and security.
weight: 1
date: 2021-09-02
---

Axway Open Banking API Gateway is based on Axway API Gateway product

Most features are documented in the [Axway API Gateway documentation](https://docs.axway.com/bundle/axway-open-docs/page/docs/apim_administration/apigtw_admin/index.html)

## Solution Homepage

The solution homepage is available on `https://services-api.<domain-name>/open-banking/`
![Solution Homepage](/Images/homepage.png)

It a static html page using a CSS and a logo image that are easy to customize from:

You can change titles and add or update links by modifying the index.html that is defined in `open-banking-apim/configmaps/apimgr-homepage-index`

You can further customize the homepage by modifying directly the files in the `/opt/Axway/apigateway/openbanking/homepage` folder of the apimngr pod.

## KPS configuration

The Key Properties Store of API Gateway is used to store the solution configuration variables.
This configuration can be read at the beginning of any policy using a common policy "Read Configuration"

| Column Name | Type | Purpose |
| --- | --- | --- |
| a_id | java.lang.String | Autogenerated Id |
| b_tenantId | java.lang.String | Bank Identifier (helpful in multi tenant setup) |
| c_name | java.lang.String | API Name |
| d_version | java.lang.String | API Version |
| e_method | java.lang.String | API Method |
| f\_extension\_1 | java.lang.String | for future use (example: HTTP Method) |
| g\_extension\_2 | java.lang.String | for future use |
| k_values | java.util.Map&lt;java.lang.String,java.lang.String&gt; | Key Value Pairs, helps in extending configuration whenever we want without deployment. New key value pairs can be added easl\ |

By default, only 1 line exists with no criteria (columns b to e) and values (column k) corresponding to solution deployment parameters. Refer to [Solution Deployment](/docs/deployment/installation) to see how to changes this values during deployment. 

You can check and update your current configuration from API Gateway Manager > Settings > Key Properties Store :

![kps-configuration](/Images/api-gateway-manager-kps-configuration.png)

Click on configuration and on the line to be checked or updated.

![kps-values](/Images/api-gateway-manager-kps-values.png)

Several values should correspond to the settings of CLOUDENTITY ACP or it consent module. Here a mapping table to check KPS values are correct.

| KPS Values | How to retrieve check this values in cloudentity ACP UI |
| --- | --- |
| oauth\_consent\_clientId | custom IDP Demo bank login ID :bank customer |
| oauth\_consent\_clientSecret | custom IDP Demo bank login secret : bank customer |
| oauth\_consent\_confirmation_clientid | Settings : consent screen client id |
| oauth\_consent\_confirmation_clientSecret | Settings  : consent screen client secret |
| oauth\_consent\_user_clientSecret | Custom IDP Demo bank login secret : open banking workspace |
| oauth_host | host of acp server |
| oauth_id | openbanking workspace id in ACP server |
| oauth\_introspect\_clientid | app is bank in openbanking workspace |
| oauth_tenantid | tenant id in ACP server |

## API Policies

API Gateway is configured with several API policies that are used Open Banking flows.
You may want to customize some of these policies.

You can check these policies definition by opening Policy Studio and navigate to Policy > #AMPLIFY-OB.

![apim-policy-studio-apis](/Images/apim-policy-studio-api-containers.png)

If you decide to change one of them, you can directly use Policy Studio only for development environment.
For other environments, you would need to export the Policy Studio projects and build new APIM docker images, and use them instead of standard ones.

## Certificates

API Gateway is configured with several certificate that are used during the runtime : server certificate, client certificate authority, jwt certificate and keys.

You can check which ones are in use by opening Policy Studio and navigate to Environment Configuration > Certificate and Keys > Certificates.
Right-click on certificate to see if there any reference to it, meaning they are currently in use.

![apim-policy-studio-certificates](/Images/apim-policy-studio-certificates.png)

If you identify the need to change one of them, refer to the API Gateway instructions that you can find under each sections of [Certificate Management](/docs/configuration/certificate-management)
