<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1533px" preserveAspectRatio="none" style="width:1484px;height:1533px;background:#FFFFFF;" version="1.1" viewBox="0 0 1484 1533" width="1484px" zoomAndPan="magnify"><defs><filter height="300%" id="fvu62jvsxkq8j" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="Roboto" font-size="18" lengthAdjust="spacing" textLength="0" x="740.75" y="28.6992"/><text fill="#000000" font-family="Roboto" font-size="18" lengthAdjust="spacing" textLength="0" x="740.75" y="49.793"/><text fill="#000000" font-family="Roboto" font-size="18" lengthAdjust="spacing" textLength="0" x="740.75" y="70.8867"/><rect fill="#E06666" height="1437.1875" style="stroke:#A80036;stroke-width:1.0;" width="236.5" x="349" y="83.2813"/><text fill="#000000" font-family="Roboto" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="110" x="410.75" y="95.3418">Open Banking APIs</text><rect fill="#94C47D" height="1437.1875" style="stroke:#A80036;stroke-width:1.0;" width="314" x="607.5" y="83.2813"/><text fill="#000000" font-family="Roboto" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="159" x="683.5" y="95.3418">Identity and Access Control</text><rect fill="#D5A6BD" height="1437.1875" style="stroke:#A80036;stroke-width:1.0;" width="160" x="943.5" y="83.2813"/><text fill="#000000" font-family="Roboto" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="151" x="946.5" y="95.3418">Core Banking Applications</text><rect fill="#DDDDDD" height="1437.1875" style="stroke:#A80036;stroke-width:1.0;" width="196" x="1125.5" y="83.2813"/><text fill="#000000" font-family="Roboto" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="135" x="1156" y="95.3418">Open Banking Directory</text><rect fill="#DDDDDD" height="1437.1875" style="stroke:#A80036;stroke-width:1.0;" width="123" x="1343.5" y="83.2813"/><text fill="#000000" font-family="Roboto" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="117" x="1346.5" y="95.3418">Certificate Authority</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="38" x2="38" y1="170.7344" y2="1526.4688"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="126" x2="126" y1="170.7344" y2="1526.4688"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="390" x2="390" y1="170.7344" y2="1526.4688"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="550.5" x2="550.5" y1="170.7344" y2="1526.4688"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="661.5" x2="661.5" y1="170.7344" y2="1526.4688"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="866.5" x2="866.5" y1="170.7344" y2="1526.4688"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="983" x2="983" y1="170.7344" y2="1526.4688"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1063" x2="1063" y1="170.7344" y2="1526.4688"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1176.5" x2="1176.5" y1="170.7344" y2="1526.4688"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1275.5" x2="1275.5" y1="170.7344" y2="1526.4688"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1405" x2="1405" y1="170.7344" y2="1526.4688"/><text fill="#000000" font-family="Roboto" font-size="14" lengthAdjust="spacing" textLength="61" x="5" y="167.3164">Customer</text><ellipse cx="38.5" cy="97.3281" fill="#FEFECE" filter="url(#fvu62jvsxkq8j)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M38.5,105.3281 L38.5,132.3281 M25.5,113.3281 L51.5,113.3281 M38.5,132.3281 L25.5,147.3281 M38.5,132.3281 L51.5,147.3281 " fill="none" filter="url(#fvu62jvsxkq8j)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#fvu62jvsxkq8j)" height="46.8125" style="stroke:#A80036;stroke-width:1.5;" width="84" x="82" y="118.9219"/><text fill="#000000" font-family="Roboto" font-size="14" lengthAdjust="spacing" textLength="70" x="89" y="138.9102">Third-Party</text><text fill="#000000" font-family="Roboto" font-size="14" lengthAdjust="spacing" textLength="25" x="111.5" y="155.3164">App</text><rect fill="#FEFECE" filter="url(#fvu62jvsxkq8j)" height="46.8125" style="stroke:#A80036;stroke-width:1.5;" width="70" x="353" y="118.9219"/><text fill="#000000" font-family="Roboto" font-size="14" lengthAdjust="spacing" textLength="22" x="377" y="138.9102">API</text><text fill="#000000" font-family="Roboto" font-size="14" lengthAdjust="spacing" textLength="56" x="360" y="155.3164">Gateway</text><rect fill="#FEFECE" filter="url(#fvu62jvsxkq8j)" height="46.8125" style="stroke:#A80036;stroke-width:1.5;" width="57" x="520.5" y="118.9219"/><text fill="#000000" font-family="Roboto" font-size="14" lengthAdjust="spacing" textLength="22" x="538" y="138.9102">API</text><text fill="#000000" font-family="Roboto" font-size="14" lengthAdjust="spacing" textLength="43" x="527.5" y="155.3164">Builder</text><rect fill="#FEFECE" filter="url(#fvu62jvsxkq8j)" height="46.8125" style="stroke:#A80036;stroke-width:1.5;" width="97" x="611.5" y="118.9219"/><text fill="#000000" font-family="Roboto" font-size="14" lengthAdjust="spacing" textLength="47" x="636.5" y="138.9102">Identity</text><text fill="#000000" font-family="Roboto" font-size="14" lengthAdjust="spacing" textLength="83" x="618.5" y="155.3164">Management</text><rect fill="#FEFECE" filter="url(#fvu62jvsxkq8j)" height="46.8125" style="stroke:#A80036;stroke-width:1.5;" width="97" x="816.5" y="118.9219"/><text fill="#000000" font-family="Roboto" font-size="14" lengthAdjust="spacing" textLength="52" x="839" y="138.9102">Consent</text><text fill="#000000" font-family="Roboto" font-size="14" lengthAdjust="spacing" textLength="83" x="823.5" y="155.3164">Management</text><rect fill="#FEFECE" filter="url(#fvu62jvsxkq8j)" height="63.2188" style="stroke:#A80036;stroke-width:1.5;" width="66" x="948" y="102.5156"/><text fill="#000000" font-family="Roboto" font-size="14" lengthAdjust="spacing" textLength="51" x="955.5" y="122.5039">Banking</text><text fill="#000000" font-family="Roboto" font-size="14" lengthAdjust="spacing" textLength="47" x="957.5" y="138.9102">Identity</text><text fill="#000000" font-family="Roboto" font-size="14" lengthAdjust="spacing" textLength="52" x="955" y="155.3164">Provider</text><rect fill="#FEFECE" filter="url(#fvu62jvsxkq8j)" height="46.8125" style="stroke:#A80036;stroke-width:1.5;" width="67" x="1028" y="118.9219"/><text fill="#000000" font-family="Roboto" font-size="14" lengthAdjust="spacing" textLength="51" x="1036" y="138.9102">Banking</text><text fill="#000000" font-family="Roboto" font-size="14" lengthAdjust="spacing" textLength="53" x="1035" y="155.3164">Systems</text><rect fill="#FEFECE" filter="url(#fvu62jvsxkq8j)" height="46.8125" style="stroke:#A80036;stroke-width:1.5;" width="90" x="1129.5" y="118.9219"/><text fill="#000000" font-family="Roboto" font-size="14" lengthAdjust="spacing" textLength="76" x="1136.5" y="138.9102">Participants</text><text fill="#000000" font-family="Roboto" font-size="14" lengthAdjust="spacing" textLength="23" x="1163" y="155.3164">List</text><rect fill="#FEFECE" filter="url(#fvu62jvsxkq8j)" height="46.8125" style="stroke:#A80036;stroke-width:1.5;" width="80" x="1233.5" y="118.9219"/><text fill="#000000" font-family="Roboto" font-size="14" lengthAdjust="spacing" textLength="66" x="1240.5" y="138.9102">JSON Web</text><text fill="#000000" font-family="Roboto" font-size="14" lengthAdjust="spacing" textLength="46" x="1250.5" y="155.3164">Key Set</text><rect fill="#FEFECE" filter="url(#fvu62jvsxkq8j)" height="46.8125" style="stroke:#A80036;stroke-width:1.5;" width="70" x="1368" y="118.9219"/><text fill="#000000" font-family="Roboto" font-size="14" lengthAdjust="spacing" textLength="36" x="1385" y="138.9102">OCSP</text><text fill="#000000" font-family="Roboto" font-size="14" lengthAdjust="spacing" textLength="56" x="1375" y="155.3164">Endpoint</text><rect fill="#EEEEEE" filter="url(#fvu62jvsxkq8j)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1477.5" x="0" y="201.3516"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1477.5" y1="201.3516" y2="201.3516"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1477.5" y1="204.3516" y2="204.3516"/><rect fill="#EEEEEE" filter="url(#fvu62jvsxkq8j)" height="23.2344" style="stroke:#000000;stroke-width:2.0;" width="306" x="585.75" y="190.7344"/><text fill="#000000" font-family="Roboto" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="289" x="591.75" y="206.7949">Part 1: Registration of Token Delivery Preferences</text><polygon fill="#A80036" points="378,241.1016,388,245.1016,378,249.1016,382,245.1016" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="126" x2="384" y1="245.1016" y2="245.1016"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="176" x="133" y="240.0356">POST /connect/register</text><polygon fill="#A80036" points="1393,270.3359,1403,274.3359,1393,278.3359,1397,274.3359" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="390" x2="1399" y1="274.3359" y2="274.3359"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="177" x="397" y="269.1621">Check Client Certificate Validity</text><polygon fill="#A80036" points="401,299.5703,391,303.5703,401,307.5703,397,303.5703" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="395" x2="1404" y1="303.5703" y2="303.5703"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="57" x="407" y="298.3965">Response</text><polygon fill="#A80036" points="650,328.8047,660,332.8047,650,336.8047,654,332.8047" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="390" x2="656" y1="332.8047" y2="332.8047"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="118" x="397" y="327.6309">Registration Request</text><line style="stroke:#A80036;stroke-width:1.0;" x1="662" x2="704" y1="362.0391" y2="362.0391"/><line style="stroke:#A80036;stroke-width:1.0;" x1="704" x2="704" y1="362.0391" y2="375.0391"/><line style="stroke:#A80036;stroke-width:1.0;" x1="663" x2="704" y1="375.0391" y2="375.0391"/><polygon fill="#A80036" points="673,371.0391,663,375.0391,673,379.0391,669,375.0391" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="68" x="669" y="356.8652">Verify Client</text><line style="stroke:#A80036;stroke-width:1.0;" x1="662" x2="704" y1="404.2734" y2="404.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="704" x2="704" y1="404.2734" y2="417.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="663" x2="704" y1="417.2734" y2="417.2734"/><polygon fill="#A80036" points="673,413.2734,663,417.2734,673,421.2734,669,417.2734" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="134" x="669" y="399.0996">Store Client Parameters</text><polygon fill="#A80036" points="401,442.5078,391,446.5078,401,450.5078,397,446.5078" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="395" x2="661" y1="446.5078" y2="446.5078"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="57" x="407" y="441.334">Response</text><polygon fill="#A80036" points="137,471.7422,127,475.7422,137,479.7422,133,475.7422" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="131" x2="389" y1="475.7422" y2="475.7422"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="57" x="143" y="470.5684">Response</text><rect fill="#EEEEEE" filter="url(#fvu62jvsxkq8j)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1477.5" x="0" y="504.3594"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1477.5" y1="504.3594" y2="504.3594"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1477.5" y1="507.3594" y2="507.3594"/><rect fill="#EEEEEE" filter="url(#fvu62jvsxkq8j)" height="23.2344" style="stroke:#000000;stroke-width:2.0;" width="340" x="568.75" y="493.7422"/><text fill="#000000" font-family="Roboto" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="323" x="574.75" y="509.8027">Part 2: Create Consent and Send Authentication Request</text><polygon fill="#A80036" points="378,544.1094,388,548.1094,378,552.1094,382,548.1094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="126" x2="384" y1="548.1094" y2="548.1094"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="208" x="133" y="543.0435">POST /payments/v1/consents</text><polygon fill="#A80036" points="1393,573.3438,1403,577.3438,1393,581.3438,1397,577.3438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="390" x2="1399" y1="577.3438" y2="577.3438"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="177" x="397" y="572.1699">Check Client Certificate Validity</text><polygon fill="#A80036" points="401,602.5781,391,606.5781,401,610.5781,397,606.5781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="395" x2="1404" y1="606.5781" y2="606.5781"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="57" x="407" y="601.4043">Response</text><polygon fill="#A80036" points="855,616.5781,865,620.5781,855,624.5781,859,620.5781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="390" x2="861" y1="620.5781" y2="620.5781"/><line style="stroke:#A80036;stroke-width:1.0;" x1="867" x2="909" y1="634.5781" y2="634.5781"/><line style="stroke:#A80036;stroke-width:1.0;" x1="909" x2="909" y1="634.5781" y2="647.5781"/><line style="stroke:#A80036;stroke-width:1.0;" x1="868" x2="909" y1="647.5781" y2="647.5781"/><polygon fill="#A80036" points="878,643.5781,868,647.5781,878,651.5781,874,647.5781" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="401,657.5781,391,661.5781,401,665.5781,397,661.5781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="395" x2="866" y1="661.5781" y2="661.5781"/><polygon fill="#A80036" points="137,671.5781,127,675.5781,137,679.5781,133,675.5781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="131" x2="389" y1="675.5781" y2="675.5781"/><polygon fill="#A80036" points="378,700.7109,388,704.7109,378,708.7109,382,704.7109" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="126" x2="384" y1="704.7109" y2="704.7109"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="144" x="133" y="699.645">POST /bc-authorize</text><polygon fill="#A80036" points="1393,729.9453,1403,733.9453,1393,737.9453,1397,733.9453" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="390" x2="1399" y1="733.9453" y2="733.9453"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="177" x="397" y="728.7715">Check Client Certificate Validity</text><polygon fill="#A80036" points="401,759.1797,391,763.1797,401,767.1797,397,763.1797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="395" x2="1404" y1="763.1797" y2="763.1797"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="57" x="407" y="758.0059">Response</text><polygon fill="#A80036" points="650,773.1797,660,777.1797,650,781.1797,654,777.1797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="390" x2="656" y1="777.1797" y2="777.1797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="662" x2="704" y1="791.1797" y2="791.1797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="704" x2="704" y1="791.1797" y2="804.1797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="663" x2="704" y1="804.1797" y2="804.1797"/><polygon fill="#A80036" points="673,800.1797,663,804.1797,673,808.1797,669,804.1797" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="401,814.1797,391,818.1797,401,822.1797,397,818.1797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="395" x2="661" y1="818.1797" y2="818.1797"/><polygon fill="#A80036" points="137,828.1797,127,832.1797,137,836.1797,133,832.1797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="131" x2="389" y1="832.1797" y2="832.1797"/><rect fill="#EEEEEE" filter="url(#fvu62jvsxkq8j)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1477.5" x="0" y="860.7969"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1477.5" y1="860.7969" y2="860.7969"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1477.5" y1="863.7969" y2="863.7969"/><rect fill="#EEEEEE" filter="url(#fvu62jvsxkq8j)" height="23.2344" style="stroke:#000000;stroke-width:2.0;" width="339" x="569.25" y="850.1797"/><text fill="#000000" font-family="Roboto" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="322" x="575.25" y="866.2402">Part 3: Customer Authenticates and Authorizes Consent</text><rect fill="#EEEEEE" filter="url(#fvu62jvsxkq8j)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1477.5" x="0" y="904.0313"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1477.5" y1="904.0313" y2="904.0313"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1477.5" y1="907.0313" y2="907.0313"/><rect fill="#EEEEEE" filter="url(#fvu62jvsxkq8j)" height="23.2344" style="stroke:#000000;stroke-width:2.0;" width="226" x="625.75" y="893.4141"/><text fill="#000000" font-family="Roboto" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="209" x="631.75" y="909.4746">Part 4: Client Granted Access Token</text><rect fill="#EEEEEE" filter="url(#fvu62jvsxkq8j)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1477.5" x="0" y="947.2656"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1477.5" y1="947.2656" y2="947.2656"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1477.5" y1="950.2656" y2="950.2656"/><rect fill="#EEEEEE" filter="url(#fvu62jvsxkq8j)" height="23.2344" style="stroke:#000000;stroke-width:2.0;" width="293" x="592.25" y="936.6484"/><text fill="#000000" font-family="Roboto" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="276" x="598.25" y="952.709">Part 6: TPP Makes Payment Instruction Request</text><path d="M131,974.8828 L131,1044.8828 L490,1044.8828 L490,984.8828 L480,974.8828 L131,974.8828 " fill="#FBFB77" filter="url(#fvu62jvsxkq8j)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M480,974.8828 L480,984.8828 L490,984.8828 L480,974.8828 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="338" x="137" y="991.9434">With the Access Token in hand the Third-Party App can now</text><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="327" x="137" y="1007.1777">make the payment instruction request. The Access Token</text><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="321" x="137" y="1022.4121">is bound to this single operation and will be revoked once</text><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="293" x="137" y="1037.6465">the payment instruction is successfully transmitted.</text><polygon fill="#A80036" points="378,1071.9531,388,1075.9531,378,1079.9531,382,1075.9531" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="126" x2="384" y1="1075.9531" y2="1075.9531"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="240" x="133" y="1070.8872">POST /payments/v1/pix/payments</text><polygon fill="#A80036" points="1393,1101.1875,1403,1105.1875,1393,1109.1875,1397,1105.1875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="390" x2="1399" y1="1105.1875" y2="1105.1875"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="177" x="397" y="1100.0137">Check Client Certificate Validity</text><polygon fill="#A80036" points="401,1130.4219,391,1134.4219,401,1138.4219,397,1134.4219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="395" x2="1404" y1="1134.4219" y2="1134.4219"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="57" x="407" y="1129.248">Response</text><path d="M395,1147.4219 L395,1217.4219 L740,1217.4219 L740,1157.4219 L730,1147.4219 L395,1147.4219 " fill="#FBFB77" filter="url(#fvu62jvsxkq8j)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M730,1147.4219 L730,1157.4219 L740,1157.4219 L730,1147.4219 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="324" x="401" y="1164.4824">The approach to Access Token introspection remains the</text><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="313" x="401" y="1179.7168">same under Payments i.e. the API Gateway will need an</text><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="286" x="401" y="1194.9512">assertion that indicates the consent granted by the</text><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="278" x="401" y="1210.1855">Customer matches the payment being instructed.</text><polygon fill="#A80036" points="650,1244.5938,660,1248.5938,650,1252.5938,654,1248.5938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="390" x2="656" y1="1248.5938" y2="1248.5938"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="143" x="397" y="1243.4199">Introspect Access Token</text><line style="stroke:#A80036;stroke-width:1.0;" x1="662" x2="704" y1="1277.8281" y2="1277.8281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="704" x2="704" y1="1277.8281" y2="1290.8281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="663" x2="704" y1="1290.8281" y2="1290.8281"/><polygon fill="#A80036" points="673,1286.8281,663,1290.8281,673,1294.8281,669,1290.8281" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="191" x="669" y="1272.6543">Retrieve Access Token properties</text><polygon fill="#A80036" points="401,1316.0625,391,1320.0625,401,1324.0625,397,1320.0625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="395" x2="661" y1="1320.0625" y2="1320.0625"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="57" x="407" y="1314.8887">Response</text><line style="stroke:#A80036;stroke-width:1.0;" x1="390" x2="432" y1="1349.2969" y2="1349.2969"/><line style="stroke:#A80036;stroke-width:1.0;" x1="432" x2="432" y1="1349.2969" y2="1362.2969"/><line style="stroke:#A80036;stroke-width:1.0;" x1="391" x2="432" y1="1362.2969" y2="1362.2969"/><polygon fill="#A80036" points="401,1358.2969,391,1362.2969,401,1366.2969,397,1362.2969" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="125" x="397" y="1344.123">Apply access controls</text><polygon fill="#A80036" points="539,1387.5313,549,1391.5313,539,1395.5313,543,1391.5313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="390" x2="545" y1="1391.5313" y2="1391.5313"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="137" x="397" y="1386.3574">Call Resources endpoint</text><polygon fill="#A80036" points="1051.5,1416.7656,1061.5,1420.7656,1051.5,1424.7656,1055.5,1420.7656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="551" x2="1057.5" y1="1420.7656" y2="1420.7656"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="210" x="558" y="1415.5918">Get available resources for Customer</text><polygon fill="#A80036" points="562,1446,552,1450,562,1454,558,1450" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="556" x2="1062.5" y1="1450" y2="1450"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="57" x="568" y="1444.8262">Response</text><polygon fill="#A80036" points="401,1475.2344,391,1479.2344,401,1483.2344,397,1479.2344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="395" x2="550" y1="1479.2344" y2="1479.2344"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="97" x="407" y="1474.0605">Return resources</text><polygon fill="#A80036" points="137,1504.4688,127,1508.4688,137,1512.4688,133,1508.4688" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="131" x2="389" y1="1508.4688" y2="1508.4688"/><text fill="#000000" font-family="Roboto" font-size="13" lengthAdjust="spacing" textLength="57" x="143" y="1503.2949">Response</text><!--MD5=[390f6c9f81de28aa0d9cebcefb5044b4]
@startuml CIBA_Example_Sequence

title \n\n
hide footbox

actor "Customer" as PSU
participant "Third-Party\nApp" as TPP

box Open Banking APIs #e06666 
participant "API\nGateway" as API_GATEWAY
participant "API\nBuilder" as API_BUILDER
end box

box Identity and Access Control #94c47d
participant "Identity\nManagement" as IAM
participant "Consent\nManagement" as CONSENT
end box

box Core Banking Applications #d5a6bd
participant "Banking\nIdentity\nProvider" as ASPSP_WEB
participant "Banking\nSystems" as ASPSP_API
end box

box Open Banking Directory
participant "Participants\nList" as OBD_PARTICIPANTS
participant "JSON Web\nKey Set" as OBD_JWKS
end box

box Certificate Authority
participant "OCSP\nEndpoint" as OCSP
end box

hide footbox
skinparam defaultFontName Roboto
skinparam BoxPadding 10

== Part 1: Registration of Token Delivery Preferences ==

TPP -> API_GATEWAY: ""POST /connect/register""
API_GATEWAY -> OCSP: Check Client Certificate Validity
API_GATEWAY <- - OCSP: Response
API_GATEWAY -> IAM: Registration Request
IAM -> IAM: Verify Client
IAM -> IAM: Store Client Parameters
API_GATEWAY <- - IAM: Response
TPP <- - API_GATEWAY: Response

== Part 2: Create Consent and Send Authentication Request ==


TPP -> API_GATEWAY: ""POST /payments/v1/consents""
API_GATEWAY -> OCSP: Check Client Certificate Validity
API_GATEWAY <- - OCSP: Response
API_GATEWAY -> CONSENT
CONSENT -> CONSENT
API_GATEWAY <- - CONSENT
TPP <- - API_GATEWAY

TPP -> API_GATEWAY: ""POST /bc-authorize""
API_GATEWAY -> OCSP: Check Client Certificate Validity
API_GATEWAY <- - OCSP: Response
API_GATEWAY -> IAM
IAM -> IAM
API_GATEWAY <- - IAM
TPP <- - API_GATEWAY

== Part 3: Customer Authenticates and Authorizes Consent ==

== Part 4: Client Granted Access Token ==

== Part 6: TPP Makes Payment Instruction Request ==

note right of TPP
With the Access Token in hand the Third-Party App can now
make the payment instruction request. The Access Token
is bound to this single operation and will be revoked once
the payment instruction is successfully transmitted.
end note

TPP -> API_GATEWAY: ""POST /payments/v1/pix/payments""
API_GATEWAY -> OCSP: Check Client Certificate Validity
API_GATEWAY <- - OCSP: Response

note right of API_GATEWAY
The approach to Access Token introspection remains the
same under Payments i.e. the API Gateway will need an
assertion that indicates the consent granted by the
Customer matches the payment being instructed.
end note

API_GATEWAY -> IAM: Introspect Access Token
IAM -> IAM: Retrieve Access Token properties
API_GATEWAY <- - IAM: Response
API_GATEWAY -> API_GATEWAY: Apply access controls
API_GATEWAY -> API_BUILDER: Call Resources endpoint
API_BUILDER -> ASPSP_API: Get available resources for Customer
API_BUILDER <- - ASPSP_API: Response
API_GATEWAY <- - API_BUILDER: Return resources
TPP <- - API_GATEWAY: Response


@enduml

PlantUML version 1.2021.7(Sun May 23 13:40:07 BST 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>